stages:
  - train

train-model:
  stage: train
  image: amazon/aws-cli:2.15.0
  script:
    - echo "Starting training pipeline via Step Functions"
    - aws stepfunctions start-execution \
        --state-machine-arn arn:aws:states:us-east-1:123456789012:stateMachine:ml-train-pipeline \
        --name "train-$(date +%s)" \
        --input '{"source":"gitlab-ci","commit":"'"$CI_COMMIT_SHORT_SHA"'"}'
